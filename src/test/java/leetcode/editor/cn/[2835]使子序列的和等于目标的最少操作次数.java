package leetcode.editor.cn;

import com.sun.jndi.cosnaming.CNCtx;
import org.junit.Assert;
import org.junit.Test;

import java.util.*;

class SolutionTest2835 {
//ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•°ç»„ nums ï¼Œå®ƒåŒ…å« éè´Ÿ æ•´æ•°ï¼Œä¸”å…¨éƒ¨ä¸º 2 çš„å¹‚ï¼ŒåŒæ—¶ç»™ä½ ä¸€ä¸ªæ•´æ•° target ã€‚
//
// ä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¿…é¡»å¯¹æ•°ç»„åšä»¥ä¸‹ä¿®æ”¹ï¼š
//
//
// é€‰æ‹©æ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´  nums[i] ï¼Œæ»¡è¶³ nums[i] > 1 ã€‚
// å°† nums[i] ä»æ•°ç»„ä¸­åˆ é™¤ã€‚
// åœ¨ nums çš„ æœ«å°¾ æ·»åŠ  ä¸¤ä¸ª æ•°ï¼Œå€¼éƒ½ä¸º nums[i] / 2 ã€‚
//
//
// ä½ çš„ç›®æ ‡æ˜¯è®© nums çš„ä¸€ä¸ª å­åºåˆ— çš„å…ƒç´ å’Œç­‰äº target ï¼Œè¯·ä½ è¿”å›è¾¾æˆè¿™ä¸€ç›®æ ‡çš„ æœ€å°‘æ“ä½œæ¬¡æ•° ã€‚å¦‚æœæ— æ³•å¾—åˆ°è¿™æ ·çš„å­åºåˆ—ï¼Œè¯·ä½ è¿”å› -1 ã€‚
//
//
// æ•°ç»„ä¸­ä¸€ä¸ª å­åºåˆ— æ˜¯é€šè¿‡åˆ é™¤åŸæ•°ç»„ä¸­ä¸€äº›å…ƒç´ ï¼Œå¹¶ä¸”ä¸æ”¹å˜å‰©ä½™å…ƒç´ é¡ºåºå¾—åˆ°çš„å‰©ä½™æ•°ç»„ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šnums = [1,2,8], target = 7
//è¾“å‡ºï¼š1
//è§£é‡Šï¼šç¬¬ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[2] ã€‚æ•°ç»„å˜ä¸º nums = [1,2,4,4] ã€‚
//è¿™æ—¶å€™ï¼Œnums åŒ…å«å­åºåˆ— [1,2,4] ï¼Œå’Œä¸º 7 ã€‚
//æ— æ³•é€šè¿‡æ›´å°‘çš„æ“ä½œå¾—åˆ°å’Œä¸º 7 çš„å­åºåˆ—ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šnums = [1,32,1,2], target = 12
//è¾“å‡ºï¼š2
//è§£é‡Šï¼šç¬¬ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[1] ã€‚æ•°ç»„å˜ä¸º nums = [1,1,2,16,16] ã€‚
//ç¬¬äºŒæ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[3] ã€‚æ•°ç»„å˜ä¸º nums = [1,1,2,16,8,8] ã€‚
//è¿™æ—¶å€™ï¼Œnums åŒ…å«å­åºåˆ— [1,1,2,8] ï¼Œå’Œä¸º 12 ã€‚
//æ— æ³•é€šè¿‡æ›´å°‘çš„æ“ä½œå¾—åˆ°å’Œä¸º 12 çš„å­åºåˆ—ã€‚
//
// ç¤ºä¾‹ 3ï¼š
//
//
//è¾“å…¥ï¼šnums = [1,32,1], target = 35
//è¾“å‡ºï¼š-1
//è§£é‡Šï¼šæ— æ³•å¾—åˆ°å’Œä¸º 35 çš„å­åºåˆ—ã€‚
//
//
//
//
// æç¤ºï¼š
//
//
// 1 <= nums.length <= 1000
// 1 <= nums[i] <= 2Â³â°
// nums åªåŒ…å«éè´Ÿæ•´æ•°ï¼Œä¸”å‡ä¸º 2 çš„å¹‚ã€‚
// 1 <= target < 2Â³Â¹
//
//
// ğŸ‘ 6, ğŸ‘ 0bug åé¦ˆ | ä½¿ç”¨æŒ‡å— | æ›´å¤šé…å¥—æ’ä»¶
//
//
//
//

    public static
            //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        public int minOperations(List<Integer> nums, int target) {
            long sum = 0;
            int[] cnt = new int[31];
            for (Integer num : nums) {
                if ((num & target) != 0) {
                    target ^= num;
                    continue;
                }
                sum += num;
                cnt[Integer.numberOfTrailingZeros(num)]++;
            }
            if (sum < target) {
                return -1;
            }
            sum = 0;
            int ans = 0;
            for (int i = 0; i < 31; i++) {
                long v = 1L << i;
                sum += cnt[i] * v;
                if ((v & target) == 0) {
                    continue;
                }
                if (sum >= v) {
                    target ^= v;
                    sum -= v;
                    continue;
                }
                for (int j = i + 1; j < 31; j++) {
                    ans++;
                    if (cnt[j] > 0) {
                        cnt[j]--;
                        sum += 1L << j;
                        sum -= v;
                        target ^= v;
                        break;
                    }
                }
            }
            return ans;
        }

    }
//leetcode submit region end(Prohibit modification and deletion)

    //Do some Test
    public static class TestClass {

        @Test
        public void defaultSolutionTest() {
            Solution solution = new Solution();
            Assert.assertEquals(1, solution.minOperations(Arrays.asList(1, 2, 8), 7));
            Assert.assertEquals(2, solution.minOperations(Arrays.asList(1, 32, 1, 2), 12));
            Assert.assertEquals(-1, solution.minOperations(Arrays.asList(1, 32, 1), 35));
            Assert.assertEquals(4, solution.minOperations(Arrays.asList(128, 1, 128, 1, 64), 4));
            Assert.assertEquals(2, solution.minOperations(Arrays.asList(8, 1024, 8388608, 4, 8, 2097152, 1024, 1024, 128, 1073741824, 4, 4096, 4, 4, 524288, 65536, 33554432, 2097152, 65536, 65536, 128, 4, 4, 8, 268435456, 256, 268435456, 65536, 33554432, 4096, 1073741824, 1073741824, 524288, 8388608, 33554432, 4096, 33554432, 1024, 1073741824, 4, 8, 2097152, 4), 43));
            Assert.assertEquals(2, solution.minOperations(Arrays.asList(1024, 16777216, 4194304, 131072, 4194304, 4096, 262144, 131072, 1073741824, 1048576, 512, 1073741824, 128, 4096, 2048, 32768, 128, 128, 262144, 16384, 2097152, 1073741824, 128, 1, 1073741824, 2097152, 32, 16777216, 1073741824, 4194304, 512, 4194304, 2048, 128, 1024, 1, 262144, 128, 8388608, 1048576, 262144, 65536, 8192, 1073741824, 4194304, 1024, 128, 1073741824, 512, 4096, 1, 4194304, 32768, 4194304, 4194304, 1073741824, 268435456, 1024, 262144, 2, 67108864, 8192, 1024, 128, 1073741824, 1048576, 8388608, 4194304, 8388608, 4, 128, 32768, 128, 512, 4096, 67108864, 1, 8388608, 128, 4096, 32768, 1073741824, 128, 32, 1048576, 16777216, 1048576, 262144, 4194304), 89));
            Assert.assertEquals(0, solution.minOperations(Arrays.asList(2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152), 1073741824));
            Assert.assertEquals(1, solution.minOperations(Arrays.asList(128, 1024, 1073741824, 4194304, 268435456, 1024, 16, 1073741824, 131072, 4, 16777216, 67108864, 16777216, 268435456, 1073741824, 256, 16, 67108864, 1048576, 16, 4, 4194304, 1024, 16, 262144, 1048576, 1024, 128, 1073741824, 67108864, 65536, 128, 32768, 128, 32768, 8192, 256, 1024), 38));
            Assert.assertEquals(5, solution.minOperations(Arrays.asList(64, 64, 64, 64, 128, 128, 128, 64, 64, 256, 64, 64, 64, 128, 64, 128, 128, 64, 128, 1024, 1024, 131072, 64, 1073741824, 256, 1073741824, 64, 64, 64, 64, 64, 128, 128, 128, 128, 64, 64, 64, 128, 1024, 128, 128, 64, 64, 128, 64, 64, 64, 128, 1073741824, 128, 128, 64, 64, 64, 1024, 64, 64, 64, 64, 64, 64, 64, 1073741824, 512, 128, 64, 1024, 64, 64, 64, 64, 64, 64, 128, 128, 128, 128, 64, 256, 128, 256, 1024, 1024, 64, 64, 64, 64, 2048, 1024, 128, 128, 64, 64, 64, 1073741824, 64, 64, 64, 64, 64, 128, 64, 64, 128, 128, 64, 64, 268435456, 128, 1024, 64, 128, 256, 128, 64, 128, 64, 128, 64, 1024, 64, 128, 64, 64, 128, 64, 1073741824, 64, 128, 128, 128, 128, 1073741824, 128, 1024, 512, 64, 512, 64, 128, 256, 64, 16, 32768, 1024, 64, 64, 64, 128, 64, 128, 64, 128, 64, 64, 64, 2048, 16, 128, 256, 64, 128, 64, 512, 128, 64, 64, 64, 128, 256, 1073741824, 128), 173));
        }

    }
}
